\chapter{Introduction}
This master thesis presents the capacity estimation method for hop-by-hop measurements. Our goal is to create and test a method of calculating the capacity (i.e. maximum transmission rate) in a given network path and locating the narrow link.
We will test the developed tool in regard to various metrics, such as packet size, intrusion rate, cross-traffic and flow-interference and finally, analyze the test results in order to conclude whether our approach is actually capable of delivering accurate results efficiently. 

\section{Motivation}
As the Internet is becoming an increasingly essential part of our day-to-day life, it is even more important for Internet providers to enhance the quality of networks in order to create a better user experience. One of the means to achieve this goal is to have a better picture of the network they aim to improve. Therefore, we are going to create a tool that measures the capacity of the path between two hosts. The intended field of application is, for instance,  traffic analysis and network monitoring, which provides the ground for enhancing network performance. 

There are quite a few capacity estimation methodologies and tools available, that will be discussed in chapters below. However, the current State-of-the-Art methods have some significant flaws and limitations regarding our measurement goals, such as  
\begin{itemize}
	\item High intrusion, which can lead to network overload,
	\item Dependence on ongoing traffic, which can be unpredictable at times,
	\item Inability to locate the narrow link on the path.
\end{itemize}

Therefore, our goal is to develop a new solution that tries to minimize the influence of these limitations in regard to our measurement objectives. We will try to implement the least possible intrusion without compromising the accuracy. Also our tool will be able to find the first narrow link of the path by measuring the capacity of each hop in the network. 

This new solution will be tested and evaluated in comparison to the results of existing capacity measurement tools, i.e. PPrate implementation by Patryk Brzoza[x], but in contrast to Brzoza’s passive approach our tool will be based on an active measurement methodology. Moreover Brzoza’s measurement tool was designed to estimate end-to-end capacity, while this thesis is concerned about measuring the capacity of each hop in the network and finding the narrow link, as hop-by-hop measurements provide a better picture of a network and enable to take a closer look at potential issues.



\section{Research Questions}
This thesis is supposed to answer the following research questions:

\begin{itemize}
  \item \textbf{How to measure network capacity hop-by-hop?}
  \\In order to measure the path capacity hop-by-hop, we need to estimate capacities to each router on the path until the destination host is reached. 
  \item \textbf{How to optimize the trade-off between accuracy and intrusiveness regarding large-scale measurements?}
  \\Certain level of intrusion into the network will be necessary for the measurements. However, there is an important factor to consider: the research shows that too high intrusion could disrupt the traffic in the network and too low could lead to unreliable results. Therefore an optimal trade-off has to be found: What will be the optimal amount of packets to send to each router to get correct results?
  \item \textbf{How robust is the proposed solution regarding the handling of flow-interference, such as cross-traffic?}
  \\Real networks are usually quite complex and different challenges might arise when we are trying to measure the path capacity. We need to find out whether our solution is feasible when it faces cross-traffic and analyze its effects on the final results.
  \item \textbf{Are we able to locate the capacity bottlenecks of a network?}
  \\ We are interested to find the location of the weakest link in the given network. This can be achieved by finding the capacities to each hop. The weakest link will 
\end{itemize}

\section{Outline}
The remainder of this thesis is structured as follows:
\\Chapter 2 defines the necessary terminology for understanding this thesis. Namely, capacity, TCP, ICMP, Raw sockets, etc. 
\\Chapter 3 describes the related work: what has been done in regard to capacity estimations and some drawbacks and limitations to the existing approaches.
\\Chapter 4 describes the approach and the tool that we have developed to implement it. 
\\Chapter 5 reviews the test setup and test environment in which the experiments are conducted.
\\Chapter 6 evaluates our approach based on several parameters. It reviews the different factors that might affect the measurements and to what extent.
\\Finally, chapter 7 concludes our thesis and subsequently discusses the future work - what can be done afterwards to further extend our methodology. 